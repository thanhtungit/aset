/*
 Copyright (c)2014-2018 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license     GNU GPL version 3 or later
*/
if("undefined"===typeof akeeba)var akeeba={};"undefined"===typeof akeeba.Setup&&(akeeba.Setup={},akeeba.Setup.translations={},akeeba.Setup.URLs={},akeeba.Setup.FtpBrowser={params:{}},akeeba.Setup.SftpBrowser={params:{}},akeeba.Setup.FtpTest={},akeeba.Setup.SftpTest={});akeeba.Setup.onFsDriverClick=function(b){b=document.getElementById("fs_driver").value;document.getElementById("ftp_options").style.display="ftp"===b||"sftp"===b?"block":"none"};
akeeba.Setup.init=function(){akeeba.System.addEventListener(document.getElementById("fs_driver"),"change",akeeba.Setup.onFsDriverClick);this.onFsDriverClick()};akeeba.Setup.FtpBrowser.callback=function(b){var a="/".replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1");b="/"+(b+"").replace(RegExp("^["+a+"]+","g"),"");document.getElementById(akeeba.Setup.FtpBrowser.params.key).value=b};
akeeba.Setup.FtpBrowser.initialise=function(b,a){akeeba.Setup.FtpBrowser.params.host=document.getElementById(a+"_host").value;akeeba.Setup.FtpBrowser.params.port=document.getElementById(a+"_port").value;akeeba.Setup.FtpBrowser.params.username=document.getElementById(a+"_username").value;akeeba.Setup.FtpBrowser.params.password=document.getElementById(a+"_password").value;akeeba.Setup.FtpBrowser.params.passive=!0;akeeba.Setup.FtpBrowser.params.ssl=!1;akeeba.Setup.FtpBrowser.params.directory=document.getElementById(a+
"_directory").value;akeeba.Setup.FtpBrowser.params.key=b;akeeba.Setup.FtpBrowser.open()};
akeeba.Setup.FtpBrowser.open=function(){var b=document.getElementById("ftpdialog");b.style.display="block";akeeba.System.addEventListener("ftpdialogOkButton","click",function(a){akeeba.Setup.FtpBrowser.callback(akeeba.Setup.FtpBrowser.params.directory);"object"===typeof akeeba.Setup.FtpBrowser.Modal&&akeeba.Setup.FtpBrowser.Modal.close&&akeeba.Setup.FtpBrowser.Modal.close()});akeeba.System.addEventListener(document.getElementById("ftpdialogCancelButton"),"click",function(a){"object"===typeof akeeba.Setup.FtpBrowser.Modal&&
akeeba.Setup.FtpBrowser.Modal.close&&akeeba.Setup.FtpBrowser.Modal.close()});akeeba.Setup.FtpBrowser.Modal=akeeba.Modal.open({inherit:b,width:"80%"});document.getElementById("ftpBrowserErrorContainer").style.display="none";document.getElementById("ftpBrowserFolderList").innerHTML="";document.getElementById("ftpBrowserCrumbs").innerHTML="";akeeba.System.params.AjaxURL=akeeba.Setup.URLs.ftpBrowser;empty(akeeba.Setup.FtpBrowser.params.directory)&&(akeeba.Setup.FtpBrowser.params.directory="");akeeba.System.doAjax({host:akeeba.Setup.FtpBrowser.params.host,
port:akeeba.Setup.FtpBrowser.params.port,username:akeeba.Setup.FtpBrowser.params.username,password:akeeba.Setup.FtpBrowser.params.password,passive:akeeba.Setup.FtpBrowser.params.passive?1:0,ssl:akeeba.Setup.FtpBrowser.params.ssl?1:0,directory:akeeba.Setup.FtpBrowser.params.directory},function(a){var b=document.getElementById("ak_crumbs2"),d=document.getElementById("ftpBrowserFolderList");d.style.display="none";b.style.display="none";if(!1!==a.error)document.getElementById("ftpBrowserError").innerHTML=
a.error,document.getElementById("ftpBrowserErrorContainer").style.display="block";else{document.getElementById("ftpBrowserErrorContainer").style.display="none";if(!empty(a.breadcrumbs)){b.style.display="block";b.innerHTML="";var e="/";akeeba.Setup.FtpBrowser.addCrumb(akeeba.Setup.translations["UI-ROOT"],"/",b);for(i=0;i<a.breadcrumbs.length;i++){var c=a.breadcrumbs[i],e=e+("/"+c);akeeba.Setup.FtpBrowser.addCrumb(c,e,b)}}if(!empty(a.list)){d.style.display="block";akeeba.Setup.FtpBrowser.params.directory||
(akeeba.Setup.FtpBrowser.params.directory=a.directory);for(i=0;i<a.list.length;i++)b=a.list[i],akeeba.Setup.FtpBrowser.createLink(a.directory+"/"+b,b,d)}}},function(a){document.getElementById("ftpBrowserError").innerHTML=a;document.getElementById("ftpBrowserErrorContainer").style.display="block";document.getElementById("ftpBrowserFolderList").style.display="none";document.getElementById("ftpBrowserCrumbs").style.display="none"},!1)};
akeeba.Setup.FtpBrowser.createLink=function(b,a,g,d){"undefined"===typeof d&&(d=akeeba.Setup.FtpBrowser);var e=document.createElement("tr"),c=document.createElement("td");e.appendChild(c);var f=document.createElement("a");f.innerText=a;akeeba.System.addEventListener(f,"click",function(a){d.params.directory=b;d.open()});c.appendChild(f);g.appendChild(e)};
akeeba.Setup.FtpBrowser.addCrumb=function(b,a,g,d){"undefined"==typeof d&&(d=akeeba.Setup.FtpBrowser);var e=document.createElement("li"),c=document.createElement("a");c.innerHTML=b;akeeba.System.addEventListener(c,"click",function(b){d.params.directory=a;d.open();b.preventDefault?b.preventDefault():b.returnValue=!1});e.appendChild(c);g.appendChild(e)};
akeeba.Setup.SftpBrowser.initialise=function(b,a){akeeba.Setup.SftpBrowser.params.host=document.getElementById(a+"_host").value;akeeba.Setup.SftpBrowser.params.port=document.getElementById(a+"_port").value;akeeba.Setup.SftpBrowser.params.username=document.getElementById(a+"_username").value;akeeba.Setup.SftpBrowser.params.password=document.getElementById(a+"_password").value;akeeba.Setup.SftpBrowser.params.directory=document.getElementById(a+"_directory").value;akeeba.Setup.SftpBrowser.params.privKey=
"";akeeba.Setup.SftpBrowser.params.pubKey="";akeeba.Setup.FtpBrowser.params.key=b;akeeba.Setup.SftpBrowser.open()};
akeeba.Setup.SftpBrowser.open=function(){var b=document.getElementById("sftpdialog");b.style.display="block";akeeba.System.addEventListener(document.getElementById("sftpdialogOkButton"),"click",function(a){akeeba.Setup.SftpBrowser.callback(akeeba.Setup.SftpBrowser.params.directory);"object"===typeof akeeba.Setup.SftpBrowser.Modal&&akeeba.Setup.SftpBrowser.Modal.close&&akeeba.Setup.SftpBrowser.Modal.close()});akeeba.System.addEventListener(document.getElementById("sftpdialogCancelButton"),"click",
function(a){"object"===typeof akeeba.Setup.SftpBrowser.Modal&&akeeba.Setup.SftpBrowser.Modal.close&&akeeba.Setup.SftpBrowser.Modal.close()});akeeba.Setup.SftpBrowser.Modal=akeeba.Modal.open({inherit:b,width:"80%"});document.getElementById("sftpBrowserErrorContainer").style.display="none";document.getElementById("sftpBrowserFolderList").innerHTML="";document.getElementById("sftpBrowserCrumbs").innerHTML="";akeeba.System.params.AjaxURL=akeeba.Setup.URLs.sftpBrowser;empty(akeeba.Setup.SftpBrowser.params.directory)&&
(akeeba.Setup.SftpBrowser.params.directory="");akeeba.System.doAjax({host:akeeba.Setup.SftpBrowser.params.host,port:akeeba.Setup.SftpBrowser.params.port,username:akeeba.Setup.SftpBrowser.params.username,password:akeeba.Setup.SftpBrowser.params.password,directory:akeeba.Setup.SftpBrowser.params.directory,privkey:akeeba.Setup.SftpBrowser.params.privKey,pubkey:akeeba.Setup.SftpBrowser.params.pubKey},function(a){var b=document.getElementById("sftpBrowserFolderList"),d=document.getElementById("ak_scrumbs");
b.style.display="none";d.style.display="none";if(!1!=a.error)document.getElementById("sftpBrowserError").innerHTML=a.error,document.getElementById("sftpBrowserErrorContainer").style.display="block";else{document.getElementById("ftpBrowserErrorContainer").style.display="none";if(!empty(a.breadcrumbs)){d.style.display="block";d.innerHTML="";var e="/";akeeba.Setup.FtpBrowser.addCrumb(akeeba.Setup.translations["UI-ROOT"],"/",d,akeeba.Setup.SftpBrowser);for(var c=0;c<a.breadcrumbs.length;c++){var f=a.breadcrumbs[c],
e=e+("/"+f);akeeba.Setup.FtpBrowser.addCrumb(f,e,d,akeeba.Setup.SftpBrowser)}}if(!empty(a.list)){b.style.display="block";akeeba.Solo.SftpBrowser.params.directory||(akeeba.Solo.SftpBrowser.params.directory=a.directory);for(c=0;c<a.list.length;c++)d=a.list[c],akeeba.Setup.FtpBrowser.createLink(a.directory+"/"+d,d,b,akeeba.Configuration.SftpBrowser)}}},function(a){document.getElementById("sftpBrowserError").innerHTML=a;document.getElementById("sftpBrowserErrorContainer").style.display="block";document.getElementById("sftpBrowserFolderList").style.display=
"none";document.getElementById("sftpBrowserCrumbs").style.display="none"},!1)};akeeba.Setup.SftpBrowser.callback=function(b){var a="/".replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1");b="/"+(b+"").replace(RegExp("^["+a+"]+","g"),"");document.getElementById(akeeba.Setup.SftpBrowser.params.key).value=b};
akeeba.Setup.FtpTest.testConnection=function(b,a){var g=document.getElementById(b);akeeba.Setup.FtpTest.buttonKey=b;g.setAttribute("disabled","disabled");g={host:document.getElementById(a+"_host").value,port:document.getElementById(a+"_port").value,user:document.getElementById(a+"_username").value,pass:document.getElementById(a+"_password").value,initdir:document.getElementById(a+"_directory").value,usessl:!1,passive:!0};akeeba.System.params.AjaxURL=akeeba.Setup.URLs.testFtp;akeeba.System.doAjax(g,
function(a){document.getElementById(akeeba.Setup.FtpTest.buttonKey).removeAttribute("disabled");var b=document.getElementById("testFtpDialogBodyOk"),c=document.getElementById("testFtpDialogBodyFail"),f=document.getElementById("testFtpDialogLabel");b.style.display="none";c.style.display="none";!0===a?(f.innerHTML=akeeba.Setup.translations["UI-TESTFTP-OK"],b.innerHTML=akeeba.Setup.translations["UI-TESTFTP-OK"],b.style.display="block",c.style.display="none"):(f.innerHTML=akeeba.Setup.translations["UI-TESTFTP-FAIL"],
c.html(a),b.style.display="none",c.style.display="block");akeeba.Setup.FtpTest.Modal=akeeba.Modal.open({inherit:document.getElementById("testFtpDialog"),width:"80%"})},null,!1,15E3)};
akeeba.Setup.SftpTest.testConnection=function(b,a){var g=document.getElementById(b);akeeba.Setup.SftpTest.buttonKey=b;g.setAttribute("disabled","disabled");g={host:document.getElementById(a+"_host").value,port:document.getElementById(a+"_port").value,user:document.getElementById(a+"_username").value,pass:document.getElementById(a+"_password").value,initdir:document.getElementById(a+"_directory").value,privkey:"",pubkey:""};akeeba.System.params.AjaxURL=akeeba.Setup.URLs.testSftp;akeeba.System.doAjax(g,
function(a){document.getElementById(akeeba.Setup.SftpTest.buttonKey).removeAttr("disabled");var b=document.getElementById("testFtpDialogBodyOk"),c=document.getElementById("testFtpDialogBodyFail"),f=document.getElementById("testFtpDialogLabel");b.style.display="none";c.style.display="none";!0===a?(f.innerHTML=akeeba.Setup.translations["UI-TESTSFTP-OK"],b.innerHTML=akeeba.Setup.translations["UI-TESTSFTP-OK"],b.style.display="block",c.style.display="none"):(f.innerHTML=akeeba.Setup.translations["UI-TESTSFTP-FAIL"],
c.innerHTML=a,b.style.display="none",c.style.display="block");akeeba.Setup.FtpTest.Modal=akeeba.Modal.open({inherit:document.getElementById("testFtpDialog"),width:"80%"})},null,!1,15E3)};akeeba.Setup.initFtpSftpBrowser=function(){var b=document.getElementById("fs_driver").value;"ftp"===b?akeeba.Setup.FtpBrowser.initialise("fs_directory","fs"):"sftp"===b&&akeeba.Setup.SftpBrowser.initialise("fs_directory","fs");return!1};
akeeba.Setup.testFtpSftpConnection=function(){var b=document.getElementById("fs_driver").value;"ftp"===b?akeeba.Setup.FtpTest.testConnection("btnFtpTest","fs"):"sftp"===b&&akeeba.Setup.SftpTest.testConnection("btnFtpTest","fs");return!1}; //#sourceMappingURL=setup.min.map
